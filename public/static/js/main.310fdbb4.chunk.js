(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{42:function(e,t,n){e.exports=n(83)},51:function(e,t,n){},53:function(e,t,n){},80:function(e,t){},83:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(39),c=n.n(o),i=n(8),l=n(1),s="SET_BUTTON",u="SET_NEW_SEATS",b="SET_BOARD",p="SET_POTS",d="SET_TABLE_BET",m="SET_TABLE_RAISE",h="SET_BIG_BLIND",f="SET_HANDS",y="SET_SEAT",v="SET_ACTING_PLAYER",E="SET_WINNERS";var O={seats:{},hands:{},pots:[],board:[],button:null,actingPlayer:null,tableBet:0,tableRaise:0,bigBlind:null,winners:[]};var g={playersCount:null,playersMax:null};var j="SET_VISIBLE",k="SET_AVAILABLE_ACTIONS";var B={visible:!1,availableActions:{}};var w="SET_HAND",S="SET_NAME",N="SET_HERO_STACK",T="SET_HERO_BET";var C={name:"",hand:null,stack:0,bet:0};var A=Object(i.c)({table:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:return Object(l.a)({},e,{button:t.payload});case v:return Object(l.a)({},e,{actingPlayer:t.payload});case u:return Object(l.a)({},e,{seats:t.payload});case b:return Object(l.a)({},e,{board:t.payload});case p:return Object(l.a)({},e,{pots:t.payload});case d:return Object(l.a)({},e,{tableBet:t.payload});case m:return Object(l.a)({},e,{tableRaise:t.payload});case h:return Object(l.a)({},e,{bigBlind:t.payload});case f:return Object(l.a)({},e,{hands:t.payload});case E:return Object(l.a)({},e,{winners:t.payload});case y:var n=Object(l.a)({},e.seats),a=t.payload,r=a.player.seat;return n[r]=Object(l.a)({},n[r],{stack:a.stack,bet:a.bet,inGame:a.inGame}),Object(l.a)({},e,{seats:n});default:return e}},hero:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return Object(l.a)({},e,{hand:t.payload});case S:return Object(l.a)({},e,{name:t.payload});case N:return Object(l.a)({},e,{stack:t.payload});case T:return Object(l.a)({},e,{bet:t.payload});default:return e}},room:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:g},control:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(l.a)({},e,{visible:t.payload});case k:return Object(l.a)({},e,{availableActions:t.payload});default:return e}}}),_=Object(i.d)(A,Object(i.a)(function(e){return function(t){return function(n){console.log("action",n,e),t(n)}}})),I=n(7),D=(n(51),n(2)),H=n(3),R=n(5),P=n(4),V=n(6),L=(n(53),n(41)),x=n.n(L),G=window.location.pathname.split("/")[0],W=window.location.pathname.split("/")[2],z=x()("".concat(G,"/game"),{query:{roomID:W}}),F=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props,t=e.roomID,n=e.numSeats,a=e.buyIn,o=e.startTime;return r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"header-info"},r.a.createElement("p",{className:"title-room"},"\u0422\u0443\u0440\u043d\u0438\u0440: ",t,r.a.createElement("br",null),"\u041d\u0430\u0447\u0430\u043b\u043e: ",new Date(o).toLocaleString(),r.a.createElement("br",null),"\u041c\u0435\u0441\u0442: ",n,r.a.createElement("br",null),"\u0412\u0445\u043e\u0434: $",a)),r.a.createElement("div",{className:"logo_container"},r.a.createElement("img",{src:"".concat("","/img/logo.png"),className:"logo",width:"150",alt:"logo"}),r.a.createElement("h1",{className:"App-title"},"Flame Poker")),r.a.createElement("div",{className:"header-info"},r.a.createElement("p",null,"Blinds:20/40"),r.a.createElement("p",null,"Ante:0"),r.a.createElement("p",null,"Next level: 30/60 10 min")))}}]),t}(a.Component),M=function(e){function t(e){var n;return Object(D.a)(this,t),(n=Object(R.a)(this,Object(P.a)(t).call(this,e))).drowCard=function(){var e=n.props,t=e.size,a=e.rank,r=e.suit,o=e.back,c=n.canvas.current.getContext("2d");o?c.drawPokerBack(0,0,t,"#0E5989","#041D2D"):c.drawPokerCard(0,0,t,r,a)},n.canvas=r.a.createRef(),n}return Object(V.a)(t,e),Object(H.a)(t,[{key:"componentDidMount",value:function(){this.drowCard()}},{key:"componentDidUpdate",value:function(){this.drowCard()}},{key:"render",value:function(){var e=this.props.size;return r.a.createElement("canvas",{ref:this.canvas,width:.75*e,height:e})}}]),t}(a.Component),$=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props.board.map(function(e,t){return r.a.createElement(M,{key:t,size:100,suit:e[1],rank:"T"===e[0]?"10":e[0]})});return r.a.createElement("div",{className:"table-board"},e)}}]),t}(a.Component),J=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props.pots.map(function(e,t){return e.chips?r.a.createElement("div",{key:t,className:"pot"},r.a.createElement("p",null,"\u0411\u0430\u043d\u043a ".concat(t+1,":")),r.a.createElement("span",null,e.chips)):null});return r.a.createElement("div",{className:"table-pots"},e)}}]),t}(a.Component),K=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"button"},"D")}}]),t}(a.Component),U=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props,t=e.seatID,n=e.name,a=e.stack,o=e.bet,c=e.hand,i=e.inGame,l=e.numSeats,s=e.button,u=e.acting,b=e.winning,p=e.roundEnd,d=null;i&&(d=c?c.map(function(e,t){return r.a.createElement(M,{key:t,size:50,suit:e[1],rank:"T"===e[0]?"10":e[0]})}):[r.a.createElement(M,{key:"1",size:50,back:!0}),r.a.createElement(M,{key:"2",size:50,back:!0})]);var m=9;l<=2?m=2:3===l?m=3:4===l?m=4:5===l?m=5:6===l&&(m=6);var h="seat-".concat(t+1,"-").concat(m," ").concat(t+1>m/2?"seat-left":"seat-right");return r.a.createElement("div",{className:"seat ".concat(h," ").concat(u?"acting":""," ").concat(b?"seat-winner":"")},r.a.createElement("img",{src:"".concat("","/img/default-avatar.png"),alt:"avatar",className:"seat-avatar"}),r.a.createElement("p",{className:"seat-user_name"},n),r.a.createElement("p",{className:"seat-stack"},"$",a),r.a.createElement("div",{className:"seat-hand"},d),r.a.createElement("div",{className:"seat-table_info"},s&&r.a.createElement(K,null),o&&!p?r.a.createElement("p",{className:"seat-bet"},"$",o):null,b?r.a.createElement("p",{className:"seat-bet"},"$",b):null))}}]),t}(a.Component),q=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.seats,n=e.hero,a=e.hands,o=e.button,c=e.actingPlayer,i=e.winners,l=Object.keys(t).length,s=[],u=function(e){var u=t[e],b=u.name,p=u.stack,d=u.bet,m=u.inGame,h=!1,f=a[e];b===n.name&&(h=!0,f=n.hand||null);var y=0;i.forEach(function(t){t.winners.forEach(function(t){t.seat===e&&(y+=t.chips)})}),s[e]=r.a.createElement(U,{key:e,seatID:+e,name:b,stack:p,inGame:m,bet:d,hero:h,hand:f,numSeats:l,button:o==e,acting:c==e,winning:y,roundEnd:Boolean(i.length)})};for(var b in t)u(b);return r.a.createElement("div",{className:"seats"},s)}}]),t}(a.Component),Y=Object(I.b)(function(e){return{seats:e.table.seats,hands:e.table.hands,hero:e.hero,button:e.table.button,actingPlayer:e.table.actingPlayer,winners:e.table.winners}})(q),Q=function(e){function t(){return Object(D.a)(this,t),Object(R.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this.props.table;return r.a.createElement("div",{className:"table"},r.a.createElement(J,{pots:e.pots}),r.a.createElement($,{board:e.board}),r.a.createElement(Y,null))}}]),t}(a.Component),X=function(e){function t(){var e,n;Object(D.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={betValue:0,betChanged:!1},n.onFold=function(e){z.emit("action",{word:"fold"})},n.onCheck=function(e){z.emit("action",{word:"check"})},n.onCall=function(e){z.emit("action",{word:"call"})},n.onBet=function(e){var t=n.state.betValue;z.emit("action",{word:"bet",bet:t})},n.onRaise=function(e){var t=n.state.betValue,a=n.props.heroBet;z.emit("action",{word:"raise",bet:t-a})},n.handleBetInputChange=function(e){var t=n.props,a=(t.bigBlind,t.tableBet,t.heroBet,t.stack,e.currentTarget.value);n.setState({betValue:a,betChanged:!0})},n.actionHandler=function(e){var t=n.props.setVisible;e.target.classList.contains("action_button")&&t(!1)},n}return Object(V.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e,t,n=this.state.betValue,a=this.props,o=a.visible,c=a.bigBlind,i=a.tableBet,l=a.heroBet,s=a.stack,u=a.tableRaise,b=this.props.actions,p=b.fold,d=b.check,m=b.call,h=b.bet,f=b.raise;return h&&(e=n<c?c:n>s?s:n),f&&(e=n<i+u?i+u:n>s?s:n),t=o?r.a.createElement("div",null,(h||f)&&r.a.createElement("div",null,r.a.createElement("input",{type:"number",onChange:this.handleBetInputChange,value:n}),r.a.createElement("input",{type:"range",className:"bet_range",min:h?c:i+u,max:f?s+l:s,step:1,value:n,onChange:this.handleBetInputChange})),r.a.createElement("div",{onClick:this.actionHandler},p&&r.a.createElement("button",{className:"action_button",onClick:this.onFold},"FOLD"),d&&r.a.createElement("button",{className:"action_button",onClick:this.onCheck},"CHECK"),m&&r.a.createElement("button",{className:"action_button",onClick:this.onCall},"CALL ".concat(i-l>s?s:i-l)),h&&r.a.createElement("button",{className:"action_button",onClick:this.onBet},"BET ".concat(e)),f&&r.a.createElement("button",{className:"action_button",onClick:this.onRaise},"RAISE TO ".concat(e)))):r.a.createElement("div",null),r.a.createElement("div",{className:"control_panel ".concat(o?"":"hidden")},t)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.bigBlind,a=e.tableBet,r=e.actions,o=e.visible,c=e.tableRaise;return!o&&t.betChanged?{betChanged:!1}:o&&!t.betChanged?{betValue:r.bet?n:a+c}:null}}]),t}(a.Component),Z=Object(I.b)(function(e){return{heroBet:e.hero.bet,stack:e.hero.stack}})(X),ee=function(e){function t(){var e,n;Object(D.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(R.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).state={roomID:window.location.pathname.split("/")[2],structure:null,buyIn:null,numSeats:null,startTime:null,runStack:null,heroName:null},n}return Object(V.a)(t,e),Object(H.a)(t,[{key:"setupSocket",value:function(){var e=this,t=function(t){var n=e.props,a=n.setButton,r=n.setNewSeats,o=n.setBoard,c=n.setPots,i=n.setTableBet,l=n.setBigBlind;a(t.button),r(t.seats),o(t.board),c(t.pots),i(t.bet),l(t.bigBlind)};z.on("connect",function(){z.emit("get-info",{type:"room-info"},function(t){if(t){var n=e.props.setHeroName,a=t.options,r=a.buyIn,o=a.numSeats,c=a.runStack,i=a.structure,l=a.startTime;e.setState({buyIn:r,numSeats:o,runStack:c,structure:i,startTime:l,heroName:t.hero.name}),n(t.hero.name)}})}),z.on("tournament-start",function(e){t(e)}),z.on("new-round",function(n){console.log("new-round");var a=e.props,r=a.setHands,o=a.setWinners;r({}),o([]),t(n)}),z.on("new-street",function(e){t(e)}),z.on("deal-cards",function(t){console.log("deal-cards"),(0,e.props.setHand)(t.hand)}),z.on("expected-action",function(t){var n=e.props,a=n.setVisible,r=n.setTableBet,o=n.setAvailableActions,c=n.setHeroStack,i=n.setHeroBet,l=n.setActingPlayer,s=n.setTableRaise,u=t.actions,b=t.tableBet,p=t.stack,d=t.bet,m=t.seatNum,h=t.tableRaise;a(!0),o(u),c(p),i(d),r(b),s(h),l(m),console.log("expected-action",t)}),z.on("round-end",function(t){var n=e.props,a=n.setHands,r=n.setWinners;a(t.hands),r(t.winners),console.log("round-end",t)}),z.on("all-in",function(t){(0,e.props.setHands)(t),console.log("all-in",t)}),z.on("waiting-player-move",function(t){(0,e.props.setActingPlayer)(t.seat),console.log("waiting-player-move",t)}),z.on("action-completed",function(t){var n=e.props,a=n.setHeroStack,r=n.setHeroBet,o=n.setVisible,c=n.setSeat,i=n.setActingPlayer;o(!1),a(t.stack),r(t.bet),c(t),i(null),console.log("action-completed",t)}),z.on("player-acted",function(t){var n=e.props,a=n.setSeat,r=n.setActingPlayer;a(t),r(null),console.log("player-acted",t)}),z.on("err",function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.setupSocket()}},{key:"render",value:function(){var e=this.props,t=e.room,n=e.table,a=e.control,o=this.props.setVisible,c=this.state,i=c.roomID,l=c.numSeats,s=c.buyIn,u=c.startTime;return r.a.createElement("div",{className:"App"},r.a.createElement(F,{room:t,roomID:i,numSeats:l,buyIn:s,startTime:u}),r.a.createElement("main",{className:"App-main"},r.a.createElement(Q,{table:n}),r.a.createElement(Z,{tableBet:n.tableBet,tableRaise:n.tableRaise,bigBlind:n.bigBlind,visible:a.visible,actions:a.availableActions,setVisible:o})))}}]),t}(a.Component),te=Object(I.b)(function(e){return{room:e.room,table:e.table,control:e.control}},function(e){return{setButton:function(t){return e(function(e){return{type:s,payload:e}}(t))},setNewSeats:function(t){return e(function(e){return{type:u,payload:e}}(t))},setBoard:function(t){return e(function(e){return{type:b,payload:e}}(t))},setPots:function(t){return e(function(e){return{type:p,payload:e}}(t))},setTableBet:function(t){return e(function(e){return{type:d,payload:e}}(t))},setTableRaise:function(t){return e(function(e){return{type:m,payload:e}}(t))},setHand:function(t){return e(function(e){return{type:w,payload:e}}(t))},setHeroName:function(t){return e(function(e){return{type:S,payload:e}}(t))},setVisible:function(t){return e(function(e){return{type:j,payload:e}}(t))},setAvailableActions:function(t){return e(function(e){return{type:k,payload:e}}(t))},setBigBlind:function(t){return e(function(e){return{type:h,payload:e}}(t))},setHeroStack:function(t){return e(function(e){return{type:N,payload:e}}(t))},setHeroBet:function(t){return e(function(e){return{type:T,payload:e}}(t))},setHands:function(t){return e(function(e){return{type:f,payload:e}}(t))},setSeat:function(t){return e(function(e){return{type:y,payload:e}}(t))},setActingPlayer:function(t){return e(function(e){return{type:v,payload:e}}(t))},setWinners:function(t){return e(function(e){return{type:E,payload:e}}(t))}}})(ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(I.a,{store:_},r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[42,2,1]]]);
//# sourceMappingURL=main.310fdbb4.chunk.js.map